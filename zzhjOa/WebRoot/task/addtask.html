<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加任务信息</title>
    <link rel="stylesheet" href="../css/basic.css">
    <link rel="stylesheet" href="../css/addtask.css">
</head>
<body>
<h3>添加任务信息</h3>
<div class="inputDivZT">
    <div class="inputDiv">
        <span>任务主题:</span>
        <input type="text" name="taskTheme" title="任务主题">
        <span>任务内容:</span>
        <textarea rows="3" cols="30"  name="taskContent" id="taskContent" ></textarea>
        <span>任务天数:</span>
        <input type="text" name="taskDays">
        <span>任务接收人:</span>
        <select name="taskReceive" style="margin: 0 auto;display: block"></select>
        <button id="submitTask">确认发布</button>
    </div>
</div>
<script type="text/javascript">
    $.ajax({
        url:'',
        type:'POST',
        async:false,
        data:{},
        success:function(data){
            for(var i=0;i<data.length;i++){
                $("select[name='taskReceive']").append("<option value="+data[i].recipient+" >"+data[i].name+"</option>")
            }
        }
    });

    $(function(){

        var submitTask=$("#submitTask");
        submitTask.click(function(){
            var taskTheme=$("input[name='taskTheme']").val();
            var taskContent=$("#taskContent").val();
            var taskDays=$("input[name='taskDays']").val();
            var taskReceive=$("input[name='taskReceive']").val();
            console.log(taskTheme);
            console.log(taskContent);
            console.log(taskDays);
            if(taskTheme!=""&&taskContent!=""&&taskTheme!=""){
                $.ajax({
                    url:'',
                    type:'POST',
                    async:false,
                    data:{
                        taskTheme:taskTheme,
                        taskText:taskContent,
                        taskDay:taskDays,
                        recipient:taskReceive
                    },
                    success:function(){
                        $.messager.alert("提示","发布成功","info")
                    },
                    error:function(){
                        $.messager.alert("错误","发布失败","info")
                    }
                })
            }else{
                $.messager.alert("提示","请填写完整信息", "info");
            }
        })

    })

</script>
</body>
</html>