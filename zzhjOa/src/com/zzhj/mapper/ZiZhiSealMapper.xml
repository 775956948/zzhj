<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "http://mybatis.org/dtd/mybatis-3-mapper.dtd" "mybatis-3-mapper.dtd" >
<mapper namespace="com.zzhj.mapper.ZiZhiSealMapper">
	<resultMap type="ziZhiSeal" id="zs">
		<id column="id" property="id"/>
		<result column="number" property="number"/>
		<result column="projectName" property="projectName"/>
		<result column="requestDate" property="requestDate"/>
		<result column="approver" property="approver"/>
		<result column="overDate" property="overDate"/>
		<result column="state" property="state"/>
		<association property="userName" javaType="users">
			<result column="name" property="name"/>
		</association>
	</resultMap>

  <select id="queryAll" resultMap="zs" parameterType="int">
  	SELECT z.id,z.number,z.projectName,z.requestDate,z.approver,z.overDate,z.state,u.name FROM zi_zhi_seal z INNER JOIN users u ON u.id=z.user_name limit #{startPage},#{rows}
  </select>
  <insert id="save" parameterType="ziZhiSeal">
  	insert into zi_zhi_seal(number,projectName,pageNumber,copiesNumber,text,why,user_name,requestDate,approver,state)
  	values(#{number},#{projectName},#{pageNumber},#{copiesNumber},#{text},#{why},#{userName},#{requestDate},#{approver},#{state})
  </insert>
  <select id="totalCount" resultType="int">
  		select count(*) zi_zhi_seal
  </select>
</mapper>
